# Task 14: æ€§èƒ½ä¸å“åº”æ€§ - è®¾è®¡æ–‡æ¡£

> **ä»»åŠ¡åç§°**: Performance & Responsiveness
> **åˆ›å»ºæ—¶é—´**: 2025-10-24
> **çŠ¶æ€**: è®¾è®¡ä¸­
> **ä¼˜å…ˆçº§**: é«˜

---

## ğŸ“‹ éœ€æ±‚åˆ†æ

### åŠŸèƒ½æè¿°

ä¼˜åŒ–åº”ç”¨ä»¥å¿«é€ŸåŠ è½½ã€å¤„ç†å¤§å‹æœ‰æ•ˆè´Ÿè½½,å¹¶åœ¨éªŒè¯æˆ–æ ¼å¼åŒ–æœŸé—´ä¿æŒå“åº”ã€‚

### éªŒæ”¶æ ‡å‡†

1. â³ **åœ¨ä¸­æ¡£ç¬”è®°æœ¬ç”µè„‘ä¸Š,ä»å†·å¯åŠ¨åˆ°äº¤äº’å¼ UI åœ¨ä¸¤ç§’å†…å®Œæˆ**
2. â³ **ç¼–è¾‘æˆ–éªŒè¯ 5 MB JSON ä¸ä¼šå†»ç»“ UI è¶…è¿‡ 200 æ¯«ç§’**
3. â³ **é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œé€šè¿‡ Tauri å‘½ä»¤åœ¨ä¸» UI çº¿ç¨‹ä¹‹å¤–æ‰§è¡Œ**

### å½“å‰æ€§èƒ½çŠ¶æ€åˆ†æ

**å·²å®Œæˆ** âœ…:
- Rust åç«¯ JSON è§£æä½¿ç”¨ serde_json (é«˜æ€§èƒ½)
- å‰ç«¯ä½¿ç”¨ React useMemo ç¼“å­˜æŒ‡æ ‡è®¡ç®—
- è¾“å…¥é˜²æŠ–å¤„ç† (500ms)
- Tauri å‘½ä»¤å¼‚æ­¥æ‰§è¡Œ (ä¸é˜»å¡ UI)
- æ–‡ä»¶ I/O å¤§å°é™åˆ¶: 10 MB
- JSON å¤„ç†å¤§å°é™åˆ¶: 5 MB

**å­˜åœ¨çš„é—®é¢˜** âš ï¸:
- **åº”ç”¨å¯åŠ¨æ—¶é—´**: ~6 ç§’ (å¼€å‘æ¨¡å¼) - è¶…å‡º 2 ç§’ç›®æ ‡
- **å¤§æ–‡ä»¶æ€§èƒ½**: æœªå……åˆ†æµ‹è¯• 5 MB JSON çš„å¤„ç†æ€§èƒ½
- **æŒ‡æ ‡è®¡ç®—æ€§èƒ½**: `calculateJsonMetrics` å¯¹å¤§æ–‡ä»¶å¯èƒ½å¾ˆæ…¢ (é€’å½’éå†)
- **ç¼ºå°‘æ€§èƒ½ç›‘æ§**: æ²¡æœ‰å¤„ç†æ—¶é—´çš„è¯¦ç»†è®°å½•
- **ç¼ºå°‘è¿›åº¦åé¦ˆ**: å¤§æ–‡ä»¶å¤„ç†æ—¶ç”¨æˆ·æ— æ³•æ„ŸçŸ¥è¿›åº¦
- **å†…å­˜ç®¡ç†**: æœªå¯¹å†…å­˜ä½¿ç”¨è¿›è¡Œä¼˜åŒ–å’Œç›‘æ§

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡

1. **åŠ é€Ÿåº”ç”¨å¯åŠ¨æ—¶é—´** - ä» 6 ç§’ä¼˜åŒ–åˆ° 2 ç§’ä»¥å†… (ç”Ÿäº§æ¨¡å¼)
2. **ä¼˜åŒ–å¤§æ–‡ä»¶å¤„ç†** - 5 MB JSON å¤„ç†ä¸å†»ç»“ UI (< 200ms)
3. **å¢å¼ºæ€§èƒ½ç›‘æ§** - è®°å½•å’Œæ˜¾ç¤ºå¤„ç†æ—¶é—´
4. **æ”¹å–„ç”¨æˆ·ä½“éªŒ** - æ·»åŠ åŠ è½½æŒ‡ç¤ºå™¨å’Œè¿›åº¦åé¦ˆ
5. **ä¼˜åŒ–å†…å­˜ä½¿ç”¨** - é¿å…å†…å­˜æ³„æ¼å’Œè¿‡åº¦å ç”¨

### éç›®æ ‡

- âŒ ä¸æ”¯æŒè¶…è¿‡ 5 MB çš„ JSON (ç¬¦åˆéœ€æ±‚è§„æ ¼)
- âŒ ä¸éœ€è¦å®ç° Web Worker (Tauri å·²æä¾›åç«¯çº¿ç¨‹)
- âŒ ä¸ä¼˜åŒ–å¼€å‘æ¨¡å¼æ€§èƒ½ (å¼€å‘æ¨¡å¼æœ¬èº«è¾ƒæ…¢)

---

## ğŸ—ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### 1. åº”ç”¨å¯åŠ¨æ—¶é—´ä¼˜åŒ–

#### 1.1 å½“å‰å¯åŠ¨æµç¨‹åˆ†æ

```
åº”ç”¨å¯åŠ¨ (å†·å¯åŠ¨)
  â†“
Tauri è¿›ç¨‹åˆå§‹åŒ– (~2s)
  â†“
React åº”ç”¨æ¸²æŸ“ (~1s)
  â†“
åŠ è½½ä¾èµ–å’Œåˆå§‹åŒ– Hooks (~1s)
  â†“
ä¸»é¢˜æ£€æµ‹å’Œåº”ç”¨ (~0.5s)
  â†“
å¯äº¤äº’çŠ¶æ€ (~6s æ€»è®¡)
```

#### 1.2 ä¼˜åŒ–æªæ–½

**æªæ–½ 1: ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½**
```typescript
// src/App.tsx

// æ‡’åŠ è½½éå…³é”®ç»„ä»¶
const ShortcutsHelp = lazy(() => import('./components/ShortcutsHelp'))

// ä½¿ç”¨ Suspense
<Suspense fallback={<LoadingSpinner />}>
  {showShortcutsHelp && (
    <ShortcutsHelp
      isOpen={showShortcutsHelp}
      onClose={() => setShowShortcutsHelp(false)}
    />
  )}
</Suspense>
```

**æªæ–½ 2: ä¼˜åŒ–åˆå§‹æ¸²æŸ“**
```typescript
// æ¨è¿Ÿéå…³é”®çš„åˆå§‹åŒ–
useEffect(() => {
  // ä½¿ç”¨ requestIdleCallback æ¨è¿Ÿéå…³é”®ä»»åŠ¡
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() => {
      // åˆå§‹åŒ–éå…³é”®åŠŸèƒ½
      initializeAnalytics()
    })
  }
}, [])
```

**æªæ–½ 3: Tauri é…ç½®ä¼˜åŒ–**
```json
// src-tauri/tauri.conf.json
{
  "build": {
    "beforeBuildCommand": "npm run build",
    "beforeDevCommand": "npm run dev",
    // ä¼˜åŒ–æ„å»º
    "withGlobalTauri": false
  },
  "tauri": {
    "bundle": {
      "active": true,
      // ä¼˜åŒ–åŒ…å¤§å°
      "targets": "all"
    }
  }
}
```

**ç›®æ ‡**: å°†ç”Ÿäº§æ¨¡å¼å¯åŠ¨æ—¶é—´ä» 6s é™ä½åˆ° < 2s

---

### 2. å¤§æ–‡ä»¶å¤„ç†æ€§èƒ½ä¼˜åŒ–

#### 2.1 æ€§èƒ½ç“¶é¢ˆåˆ†æ

**åç«¯ (Rust)**:
- âœ… `serde_json` å·²ç»æ˜¯æœ€ä¼˜è§£
- âœ… 5 MB é™åˆ¶å·²å®æ–½
- âš ï¸ ç¼ºå°‘å¤„ç†æ—¶é—´ç»Ÿè®¡

**å‰ç«¯ (TypeScript)**:
- âš ï¸ `calculateJsonMetrics` é€’å½’éå†å¯èƒ½å¾ˆæ…¢
- âš ï¸ æ¯æ¬¡è¾“å…¥å˜åŒ–éƒ½é‡æ–°è®¡ç®— (è™½ç„¶æœ‰ useMemo)
- âš ï¸ å¤§æ–‡ä»¶æ—¶ textarea æ¸²æŸ“å¯èƒ½å¡é¡¿

#### 2.2 ä¼˜åŒ–æªæ–½

**æªæ–½ 1: æ™ºèƒ½æŒ‡æ ‡è®¡ç®—**
```typescript
// src/utils/metricsCalculator.ts

/**
 * æ™ºèƒ½è®¡ç®— JSON æŒ‡æ ‡
 * å¯¹äºå¤§æ–‡ä»¶ï¼Œè·³è¿‡æ·±åº¦éå†æˆ–é‡‡æ ·è®¡ç®—
 */
export function calculateJsonMetrics(
  jsonString: string,
  options?: {
    skipStructureMetrics?: boolean  // è·³è¿‡ç»“æ„æŒ‡æ ‡
    maxDepth?: number                // æœ€å¤§éå†æ·±åº¦
  }
): JsonMetrics {
  const lines = jsonString.split('\n').length
  const chars = jsonString.length
  const bytes = new Blob([jsonString]).size

  // å¤§æ–‡ä»¶ (> 1 MB) è·³è¿‡ç»“æ„æŒ‡æ ‡ä»¥æå‡æ€§èƒ½
  const isLargeFile = bytes > 1024 * 1024

  if (isLargeFile || options?.skipStructureMetrics) {
    return {
      lines,
      chars,
      bytes,
      depth: 0,
      objects: 0,
      arrays: 0,
      keys: 0,
    }
  }

  // æ­£å¸¸è®¡ç®—ç»“æ„æŒ‡æ ‡...
  // (ç°æœ‰ä»£ç )
}
```

**æªæ–½ 2: é˜²æ­¢ UI å†»ç»“**
```typescript
// src/App.tsx

// ä½¿ç”¨ startTransition æ ‡è®°ä½ä¼˜å…ˆçº§æ›´æ–°
import { startTransition } from 'react'

const handleInputChange = (value: string) => {
  // ç«‹å³æ›´æ–°è¾“å…¥ (é«˜ä¼˜å…ˆçº§)
  setInputJson(value)

  // æ¨è¿ŸæŒ‡æ ‡è®¡ç®— (ä½ä¼˜å…ˆçº§)
  startTransition(() => {
    // useMemo ä¼šåœ¨è¿™é‡Œé‡æ–°è®¡ç®—
  })
}
```

**æªæ–½ 3: è™šæ‹ŸåŒ–é•¿æ–‡æœ¬**
```typescript
// å¯é€‰: å¯¹äºè¶…é•¿ JSONï¼Œä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
// å®ç°éš¾åº¦è¾ƒé«˜ï¼Œæš‚æ—¶åˆ—ä¸ºæœªæ¥ä¼˜åŒ–
```

**ç›®æ ‡**: 5 MB JSON å¤„ç†ä¸å†»ç»“ UI (< 200ms æ„ŸçŸ¥å»¶è¿Ÿ)

---

### 3. æ€§èƒ½ç›‘æ§å’Œåº¦é‡

#### 3.1 å¤„ç†æ—¶é—´ç»Ÿè®¡

**åç«¯å¢å¼º**:
```rust
// src-tauri/src/services/json_parser.rs

use std::time::Instant;

pub fn validate_json(input: &str) -> ValidationResult {
    let start = Instant::now();

    // ... ç°æœ‰éªŒè¯é€»è¾‘

    let duration = start.elapsed();

    // è¿”å›ç»“æœæ—¶åŒ…å«å¤„ç†æ—¶é—´
    ValidationResult::Success {
        data: value,
        size: input.len(),
        processing_time_ms: duration.as_millis() as u64,
    }
}
```

**å‰ç«¯ç±»å‹æ‰©å±•**:
```typescript
// src/types/validation.ts

export interface ValidationSuccess {
  type: 'success'
  data: any
  size: number
  processing_time_ms?: number  // æ–°å¢: å¤„ç†æ—¶é—´
}
```

#### 3.2 æ€§èƒ½ä»ªè¡¨æ¿

```typescript
// src/components/PerformanceStats.tsx

interface PerformanceStatsProps {
  validationTime?: number
  formattingTime?: number
  metricsTime?: number
}

export function PerformanceStats({
  validationTime,
  formattingTime,
  metricsTime,
}: PerformanceStatsProps) {
  // ä»…åœ¨å¼€å‘æ¨¡å¼æˆ–å¼€å¯æ€§èƒ½ç›‘æ§æ—¶æ˜¾ç¤º
  const showStats = import.meta.env.DEV

  if (!showStats) return null

  return (
    <div className="performance-stats">
      {validationTime && <span>éªŒè¯: {validationTime}ms</span>}
      {formattingTime && <span>æ ¼å¼åŒ–: {formattingTime}ms</span>}
      {metricsTime && <span>æŒ‡æ ‡: {metricsTime}ms</span>}
    </div>
  )
}
```

---

### 4. ç”¨æˆ·ä½“éªŒå¢å¼º

#### 4.1 åŠ è½½æŒ‡ç¤ºå™¨

```typescript
// src/components/LoadingOverlay.tsx

interface LoadingOverlayProps {
  isLoading: boolean
  message?: string
}

export function LoadingOverlay({ isLoading, message }: LoadingOverlayProps) {
  if (!isLoading) return null

  return (
    <div className="loading-overlay">
      <div className="loading-spinner" />
      {message && <p className="loading-message">{message}</p>}
    </div>
  )
}
```

**é›†æˆåˆ° App**:
```typescript
// src/App.tsx

const [loadingMessage, setLoadingMessage] = useState<string>()

const handleFormat = async () => {
  setLoadingMessage('æ­£åœ¨æ ¼å¼åŒ– JSON...')
  setIsProcessing(true)

  try {
    const result = await jsonService.formatJson(inputJson, formattingOptions)
    // ...
  } finally {
    setIsProcessing(false)
    setLoadingMessage(undefined)
  }
}

// æ¸²æŸ“
<LoadingOverlay isLoading={isProcessing} message={loadingMessage} />
```

#### 4.2 è¿›åº¦åé¦ˆ

å¯¹äºå¤§æ–‡ä»¶,æä¾›æ›´è¯¦ç»†çš„è¿›åº¦ä¿¡æ¯:

```typescript
// åœ¨çŠ¶æ€æŒ‡ç¤ºå™¨ä¸­æ˜¾ç¤º
{validationStatus === 'validating' && (
  <div className="status-indicator status-validating">
    â³ éªŒè¯ä¸­...
    {inputMetrics.bytes > 1024 * 1024 && (
      <span className="status-hint">
        (å¤„ç†å¤§æ–‡ä»¶å¯èƒ½éœ€è¦å‡ ç§’é’Ÿ)
      </span>
    )}
  </div>
)}
```

---

### 5. å†…å­˜ä¼˜åŒ–

#### 5.1 å†…å­˜æ³„æ¼é¢„é˜²

```typescript
// ç¡®ä¿æ‰€æœ‰ useEffect éƒ½æœ‰æ­£ç¡®çš„æ¸…ç†
useEffect(() => {
  const timer = setTimeout(() => {
    // ...
  }, 500)

  // æ¸…ç†å®šæ—¶å™¨
  return () => clearTimeout(timer)
}, [dependency])

// ç¡®ä¿äº‹ä»¶ç›‘å¬å™¨è¢«ç§»é™¤
useEffect(() => {
  const handleResize = () => {
    // ...
  }

  window.addEventListener('resize', handleResize)

  return () => {
    window.removeEventListener('resize', handleResize)
  }
}, [])
```

#### 5.2 å¤§å¯¹è±¡å¤„ç†

```typescript
// é¿å…åœ¨çŠ¶æ€ä¸­å­˜å‚¨è¿‡å¤§çš„å¯¹è±¡
// ä¸æ¨è:
const [parsedJson, setParsedJson] = useState<any>(null)

// æ¨è: åªåœ¨éœ€è¦æ—¶è§£æ
const parsedJson = useMemo(() => {
  try {
    return JSON.parse(inputJson)
  } catch {
    return null
  }
}, [inputJson])
```

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

1. **`src/components/LoadingOverlay.tsx`**
   - å…¨å±€åŠ è½½é®ç½©ç»„ä»¶
   - æ˜¾ç¤ºåŠ è½½åŠ¨ç”»å’Œæ¶ˆæ¯

2. **`src/components/PerformanceStats.tsx`** (å¯é€‰)
   - æ€§èƒ½ç»Ÿè®¡ç»„ä»¶
   - ä»…åœ¨å¼€å‘æ¨¡å¼æ˜¾ç¤º

3. **`src/hooks/usePerformanceMonitor.ts`** (å¯é€‰)
   - æ€§èƒ½ç›‘æ§ Hook
   - è®°å½•æ“ä½œè€—æ—¶

4. **`docs/task14-design.md`**
   - æœ¬è®¾è®¡æ–‡æ¡£

5. **`docs/task14-completion-report.md`**
   - å®ŒæˆæŠ¥å‘Š (å¾…åˆ›å»º)

### ä¿®æ”¹æ–‡ä»¶

1. **`src/App.tsx`**
   - æ·»åŠ  LoadingOverlay ç»„ä»¶
   - ä¼˜åŒ–åˆå§‹æ¸²æŸ“å’Œæ‡’åŠ è½½
   - æ·»åŠ æ€§èƒ½ç›‘æ§ä»£ç 

2. **`src/utils/metricsCalculator.ts`**
   - æ·»åŠ æ™ºèƒ½æŒ‡æ ‡è®¡ç®—é€»è¾‘
   - å¯¹å¤§æ–‡ä»¶è·³è¿‡æ·±åº¦éå†

3. **`src/types/validation.ts`**
   - æ·»åŠ  `processing_time_ms` å­—æ®µ

4. **`src/types/formatting.ts`**
   - æ·»åŠ  `processing_time_ms` å­—æ®µ

5. **`src-tauri/src/services/json_parser.rs`**
   - æ·»åŠ å¤„ç†æ—¶é—´ç»Ÿè®¡
   - è¿”å›å¤„ç†è€—æ—¶

6. **`src-tauri/src/services/json_formatter.rs`**
   - æ·»åŠ å¤„ç†æ—¶é—´ç»Ÿè®¡
   - è¿”å›å¤„ç†è€—æ—¶

7. **`src-tauri/src/models/validation.rs`**
   - æ›´æ–° `ValidationResult::Success` ç»“æ„
   - æ·»åŠ  `processing_time_ms` å­—æ®µ

8. **`src-tauri/src/models/formatting.rs`**
   - æ›´æ–° `FormattingResult::Success` ç»“æ„
   - æ·»åŠ  `processing_time_ms` å­—æ®µ

9. **`src/styles.css`**
   - æ·»åŠ  LoadingOverlay æ ·å¼
   - æ·»åŠ  PerformanceStats æ ·å¼

10. **`src-tauri/tauri.conf.json`**
    - ä¼˜åŒ–æ„å»ºé…ç½®

---

## ğŸ§ª æ€§èƒ½æµ‹è¯•è®¡åˆ’

### å¯åŠ¨æ—¶é—´æµ‹è¯•

**æµ‹è¯•ç¯å¢ƒ**:
- ç¡¬ä»¶: ä¸­æ¡£ç¬”è®°æœ¬ç”µè„‘ (M1 MacBook Air, 8GB RAM)
- æ¨¡å¼: ç”Ÿäº§æ¨¡å¼ (`npm run tauri:build`)

**æµ‹è¯•æ­¥éª¤**:
1. å®Œå…¨å…³é—­åº”ç”¨
2. å¯åŠ¨ç§’è¡¨
3. æ‰“å¼€åº”ç”¨
4. è®°å½•åˆ° UI å¯äº¤äº’çš„æ—¶é—´

**éªŒæ”¶æ ‡å‡†**: â‰¤ 2 ç§’

### å¤§æ–‡ä»¶å¤„ç†æµ‹è¯•

**æµ‹è¯•æ•°æ®**:
- 1 MB JSON: ä¸­ç­‰å¤æ‚åº¦åµŒå¥—ç»“æ„
- 3 MB JSON: æ·±åº¦åµŒå¥— + é•¿æ•°ç»„
- 5 MB JSON: æœ€å¤§å…è®¸å¤§å°,å¤æ‚ç»“æ„

**æµ‹è¯•æ“ä½œ**:
1. å¯¼å…¥æµ‹è¯• JSON æ–‡ä»¶
2. è®°å½•å¯¼å…¥æ—¶é—´
3. ç‚¹å‡»"éªŒè¯"æŒ‰é’®
4. è®°å½•éªŒè¯æ—¶é—´å’Œ UI å“åº”æ€§
5. ç‚¹å‡»"æ ¼å¼åŒ–"æŒ‰é’®
6. è®°å½•æ ¼å¼åŒ–æ—¶é—´å’Œ UI å“åº”æ€§
7. ç¼–è¾‘ JSON å†…å®¹
8. è®°å½•æŒ‡æ ‡æ›´æ–°æ—¶é—´

**éªŒæ”¶æ ‡å‡†**:
- 5 MB JSON éªŒè¯/æ ¼å¼åŒ–ä¸å†»ç»“ UI > 200ms
- æ“ä½œæœŸé—´ UI ä¿æŒå“åº”
- æ˜¾ç¤ºåˆé€‚çš„åŠ è½½æŒ‡ç¤ºå™¨

### UI å“åº”æ€§æµ‹è¯•

**æµ‹è¯•åœºæ™¯**:
1. å¿«é€Ÿè¾“å…¥å¤§é‡æ–‡æœ¬
2. è¿ç»­ç‚¹å‡»æŒ‰é’®
3. è°ƒæ•´çª—å£å¤§å°
4. åˆ‡æ¢ä¸»é¢˜
5. å¤åˆ¶å¤§é‡æ–‡æœ¬åˆ°å‰ªè´´æ¿

**éªŒæ”¶æ ‡å‡†**:
- æ‰€æœ‰æ“ä½œåœ¨ 200ms å†…å“åº”
- æ— æ˜æ˜¾å¡é¡¿æˆ–å†»ç»“

### å†…å­˜æµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. ä½¿ç”¨ Chrome DevTools ç›‘æ§å†…å­˜
2. æ‰§è¡Œ 10 æ¬¡å¤§æ–‡ä»¶å¯¼å…¥å’Œæ ¼å¼åŒ–
3. æ£€æŸ¥å†…å­˜æ˜¯å¦æŒç»­å¢é•¿ (å†…å­˜æ³„æ¼)

**éªŒæ”¶æ ‡å‡†**:
- æ— å†…å­˜æ³„æ¼
- å†…å­˜ä½¿ç”¨ç¨³å®šåœ¨åˆç†èŒƒå›´

---

## ğŸ“Š æ€§èƒ½åŸºçº¿å’Œç›®æ ‡

### å½“å‰åŸºçº¿ (å¼€å‘æ¨¡å¼)

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | ä¼˜å…ˆçº§ |
|------|--------|--------|--------|
| åº”ç”¨å¯åŠ¨æ—¶é—´ | ~6s | â‰¤ 2s (ç”Ÿäº§) | é«˜ |
| 1 MB JSON éªŒè¯ | æœªæµ‹ | â‰¤ 100ms | ä¸­ |
| 5 MB JSON éªŒè¯ | æœªæµ‹ | â‰¤ 200ms | é«˜ |
| æŒ‡æ ‡è®¡ç®— (5MB) | æœªæµ‹ | â‰¤ 100ms | ä¸­ |
| UI å†»ç»“æ—¶é—´ | æœªæµ‹ | â‰¤ 200ms | é«˜ |
| å†…å­˜ä½¿ç”¨ | æœªæµ‹ | < 200 MB | ä½ |

### ä¼˜åŒ–åç›®æ ‡ (ç”Ÿäº§æ¨¡å¼)

- âœ… **å¯åŠ¨æ—¶é—´**: ä»å†·å¯åŠ¨åˆ°å¯äº¤äº’ â‰¤ 2 ç§’
- âœ… **å¤§æ–‡ä»¶å¤„ç†**: 5 MB JSON å¤„ç†ä¸å†»ç»“ UI (â‰¤ 200ms æ„ŸçŸ¥å»¶è¿Ÿ)
- âœ… **åå°æ‰§è¡Œ**: æ‰€æœ‰ JSON å¤„ç†åœ¨ Tauri å‘½ä»¤ä¸­å¼‚æ­¥æ‰§è¡Œ
- âœ… **æ€§èƒ½ç›‘æ§**: è®°å½•å’Œæ˜¾ç¤ºæ‰€æœ‰ä¸»è¦æ“ä½œçš„è€—æ—¶
- âœ… **ç”¨æˆ·åé¦ˆ**: é•¿æ—¶é—´æ“ä½œæ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨

---

## ğŸ”„ å®æ–½æ­¥éª¤

### Phase 1: æ€§èƒ½åŸºçº¿æµ‹è¯• (1 å°æ—¶)

1. âœ… ç”Ÿæˆæµ‹è¯• JSON æ•°æ® (1MB, 3MB, 5MB)
2. âœ… æµ‹è¯•å½“å‰åº”ç”¨æ€§èƒ½
3. âœ… è®°å½•åŸºçº¿æ•°æ®
4. âœ… è¯†åˆ«ä¸»è¦ç“¶é¢ˆ

### Phase 2: åç«¯ä¼˜åŒ– (2 å°æ—¶)

1. âœ… æ·»åŠ å¤„ç†æ—¶é—´ç»Ÿè®¡åˆ° Rust æœåŠ¡
2. âœ… æ›´æ–° ValidationResult å’Œ FormattingResult ç±»å‹
3. âœ… æµ‹è¯•åç«¯æ€§èƒ½
4. âœ… ç¼–å†™ Rust å•å…ƒæµ‹è¯•

### Phase 3: å‰ç«¯ä¼˜åŒ– (3 å°æ—¶)

1. âœ… ä¼˜åŒ– `calculateJsonMetrics` (æ™ºèƒ½è·³è¿‡)
2. âœ… æ·»åŠ  LoadingOverlay ç»„ä»¶
3. âœ… å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
4. âœ… ä¼˜åŒ–åˆå§‹æ¸²æŸ“
5. âœ… æ·»åŠ æ€§èƒ½ç›‘æ§ Hook (å¯é€‰)

### Phase 4: ç”¨æˆ·ä½“éªŒå¢å¼º (2 å°æ—¶)

1. âœ… æ·»åŠ åŠ è½½æŒ‡ç¤ºå™¨
2. âœ… æ·»åŠ å¤§æ–‡ä»¶å¤„ç†æç¤º
3. âœ… ä¼˜åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨æ˜¾ç¤º
4. âœ… æ·»åŠ æ€§èƒ½ç»Ÿè®¡é¢æ¿ (å¯é€‰,ä»…å¼€å‘æ¨¡å¼)

### Phase 5: æµ‹è¯•ä¸éªŒè¯ (2 å°æ—¶)

1. âœ… æ‰§è¡Œå®Œæ•´çš„æ€§èƒ½æµ‹è¯•å¥—ä»¶
2. âœ… éªŒè¯æ‰€æœ‰éªŒæ”¶æ ‡å‡†
3. âœ… ä¿®å¤å‘ç°çš„é—®é¢˜
4. âœ… è®°å½•æœ€ç»ˆæ€§èƒ½æ•°æ®

### Phase 6: æ–‡æ¡£ä¸å®Œæˆ (1 å°æ—¶)

1. âœ… åˆ›å»ºå®ŒæˆæŠ¥å‘Š
2. âœ… æ›´æ–° TODO.md
3. âœ… æäº¤ä»£ç å’Œæ–‡æ¡£

**é¢„è®¡æ€»æ—¶é•¿**: 11 å°æ—¶

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ€§èƒ½ vs åŠŸèƒ½æƒè¡¡

- **æ™ºèƒ½æŒ‡æ ‡è®¡ç®—**: å¤§æ–‡ä»¶æ—¶è·³è¿‡ç»“æ„æŒ‡æ ‡ä¼šå¤±å»ä¸€äº›ä¿¡æ¯
  - **ç¼“è§£**: æ˜¾ç¤ºæç¤ºä¿¡æ¯,å‘ŠçŸ¥ç”¨æˆ·ä¸ºä½•æŸäº›æŒ‡æ ‡ä¸å¯ç”¨
- **ä»£ç åˆ†å‰²**: å¯èƒ½å¢åŠ é¦–æ¬¡åŠ è½½ç»„ä»¶çš„å»¶è¿Ÿ
  - **ç¼“è§£**: ä»…å¯¹éå…³é”®ç»„ä»¶ä½¿ç”¨æ‡’åŠ è½½

### 2. å¹³å°å·®å¼‚

- **macOS vs Windows/Linux**: å¯åŠ¨æ—¶é—´å¯èƒ½æœ‰å·®å¼‚
  - **ç¼“è§£**: åœ¨å¤šå¹³å°æµ‹è¯•,è®¾ç½®å¹³å°ç‰¹å®šçš„ç›®æ ‡
- **ç¡¬ä»¶å·®å¼‚**: é«˜ç«¯ vs ä¸­æ¡£è®¾å¤‡
  - **ç¼“è§£**: ä»¥ä¸­æ¡£è®¾å¤‡ä¸ºåŸºå‡† (ç¬¦åˆéœ€æ±‚è§„æ ¼)

### 3. å¼€å‘æ¨¡å¼ vs ç”Ÿäº§æ¨¡å¼

- **å¼€å‘æ¨¡å¼**: åŒ…å«çƒ­é‡è½½ã€Source Map ç­‰,æ€§èƒ½è¾ƒå·®
  - **æ³¨æ„**: æ€§èƒ½ç›®æ ‡ä»…é€‚ç”¨äºç”Ÿäº§æ¨¡å¼
- **æµ‹è¯•ç¯å¢ƒ**: å¿…é¡»åœ¨ç”Ÿäº§æ„å»ºä¸­æµ‹è¯•

### 4. æµè§ˆå™¨å¼•æ“é™åˆ¶

- **Textarea æ€§èƒ½**: å¤§æ–‡æœ¬æ¸²æŸ“æ˜¯æµè§ˆå™¨é™åˆ¶
  - **ç¼“è§£**: æ— æ³•å®Œå…¨è§£å†³,ä½†å¯é€šè¿‡è™šæ‹ŸåŒ–æ”¹å–„ (æœªæ¥ä¼˜åŒ–)
- **JavaScript å•çº¿ç¨‹**: æ— æ³•å¹¶è¡Œè®¡ç®—
  - **ç¼“è§£**: ä½¿ç”¨ startTransition å’Œ useMemo ä¼˜åŒ–

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### é‡åŒ–æŒ‡æ ‡

- âœ… **å¯åŠ¨æ—¶é—´**: â‰¤ 2 ç§’ (ç”Ÿäº§æ¨¡å¼,ä¸­æ¡£è®¾å¤‡)
- âœ… **5 MB JSON éªŒè¯**: â‰¤ 200ms UI å†»ç»“
- âœ… **5 MB JSON æ ¼å¼åŒ–**: â‰¤ 200ms UI å†»ç»“
- âœ… **æŒ‡æ ‡è®¡ç®—**: â‰¤ 100ms (æˆ–æ™ºèƒ½è·³è¿‡)
- âœ… **å†…å­˜ä½¿ç”¨**: ç¨³å®š,æ— æ³„æ¼

### å®šæ€§æŒ‡æ ‡

- âœ… **ç”¨æˆ·ä½“éªŒ**: åº”ç”¨æ„Ÿè§‰å¿«é€Ÿæµç•…
- âœ… **åé¦ˆåŠæ—¶**: é•¿æ—¶é—´æ“ä½œæœ‰æ˜ç¡®çš„åŠ è½½æŒ‡ç¤º
- âœ… **å“åº”æ€§**: UI å§‹ç»ˆä¿æŒå“åº”,ä¸å†»ç»“

---

## ğŸ” æ½œåœ¨æ”¹è¿›

### çŸ­æœŸ (Task 14 å¯é€‰)

1. **æ€§èƒ½åˆ†æå·¥å…·**: é›†æˆ React DevTools Profiler
2. **æ€§èƒ½é¢„ç®—**: è®¾ç½®æ¯ä¸ªæ“ä½œçš„æ€§èƒ½é¢„ç®—
3. **é”™è¯¯è¾¹ç•Œ**: é˜²æ­¢æ€§èƒ½é—®é¢˜å¯¼è‡´å´©æºƒ

### é•¿æœŸ (æœªæ¥ç‰ˆæœ¬)

1. **Web Worker**: å°†æŒ‡æ ‡è®¡ç®—ç§»åˆ° Worker çº¿ç¨‹
2. **è™šæ‹Ÿæ»šåŠ¨**: ä¼˜åŒ–è¶…é•¿æ–‡æœ¬æ¸²æŸ“
3. **æµå¼å¤„ç†**: å¯¹è¶…å¤§æ–‡ä»¶è¿›è¡Œæµå¼è§£æ
4. **ç¼“å­˜ä¼˜åŒ–**: ç¼“å­˜è§£æç»“æœé¿å…é‡å¤è®¡ç®—
5. **å¢é‡æ›´æ–°**: ä»…é‡æ–°è®¡ç®—å˜åŒ–çš„éƒ¨åˆ†

---

## ğŸ¯ æ ¸å¿ƒä»·å€¼

### 1. å¿«é€Ÿå¯åŠ¨

- ç”¨æˆ·æ‰“å¼€åº”ç”¨åç«‹å³å¯ç”¨
- å‡å°‘ç­‰å¾…æ—¶é—´,æå‡ä½“éªŒ

### 2. æµç•…å¤„ç†

- å¤„ç†å¤§æ–‡ä»¶æ—¶ä¸å†»ç»“ UI
- ç”¨æˆ·å¯ä»¥éšæ—¶å–æ¶ˆæ“ä½œ

### 3. æ¸…æ™°åé¦ˆ

- ç”¨æˆ·å§‹ç»ˆçŸ¥é“åº”ç”¨åœ¨åšä»€ä¹ˆ
- é•¿æ—¶é—´æ“ä½œæœ‰æ˜ç¡®çš„è¿›åº¦æŒ‡ç¤º

### 4. å¯é æ€§èƒ½

- æ€§èƒ½æŒ‡æ ‡å¯é‡åŒ–å’Œè¿½è¸ª
- å›å½’æµ‹è¯•ç¡®ä¿æ€§èƒ½ä¸é€€åŒ–

---

## ğŸ“ è¡¥å……è¯´æ˜

### ä¸å…¶ä»–ä»»åŠ¡çš„å…³è”

- **Task 2/3**: JSON è§£æå’Œæ ¼å¼åŒ–å·²ä¼˜åŒ– (Rust + serde_json)
- **Task 13**: æŒ‡æ ‡è®¡ç®—å¯èƒ½æ˜¯æ€§èƒ½ç“¶é¢ˆ,éœ€è¦ä¼˜åŒ–
- **Task 15**: åå¥½å­˜å‚¨åº”å¼‚æ­¥,ä¸é˜»å¡ UI

### æœªæ¥å¢å¼º

1. **æ€§èƒ½å‰–æ**: é›†æˆè¯¦ç»†çš„æ€§èƒ½å‰–æå·¥å…·
2. **è‡ªé€‚åº”ä¼˜åŒ–**: æ ¹æ®è®¾å¤‡æ€§èƒ½è‡ªåŠ¨è°ƒæ•´ç­–ç•¥
3. **é¢„åŠ è½½**: é¢„æµ‹ç”¨æˆ·æ“ä½œå¹¶æå‰åŠ è½½èµ„æº

### æŠ€æœ¯å€ºåŠ¡

- **MVP é™åˆ¶**:
  - ä»…æ”¯æŒ 5 MB JSON (ç¬¦åˆéœ€æ±‚)
  - Textarea æ€§èƒ½å—æµè§ˆå™¨é™åˆ¶

- **å¯é€‰ä¼˜åŒ–**:
  - Web Worker (å¤æ‚åº¦é«˜)
  - è™šæ‹Ÿæ»šåŠ¨ (å®ç°éš¾åº¦å¤§)
  - æµå¼å¤„ç† (éœ€è¦é‡æ„æ¶æ„)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
**é¢„è®¡å¼€å§‹**: 2025-10-24
**é¢„è®¡å®Œæˆ**: 2025-10-24
